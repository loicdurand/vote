{% extends 'base.html.twig' %}

{% block title %}Mon tableau de bord
{% endblock %}

{% block body %}
{# Fil d'arianne #}
<nav role="navigation" class="fr-breadcrumb" aria-label="vous êtes ici :">
	<button type="button" class="fr-breadcrumb__button" aria-expanded="false" aria-controls="breadcrumb">Voir le fil d&#39;arianne</button>

	<div class="fr-collapse" id="breadcrumb">
		<ol class="fr-breadcrumb__list">
			<li>
				<a class="fr-breadcrumb__link" id="segment-0" href="/">Accueil</a>
			</li>
			<li>
				<a class="fr-breadcrumb__link" id="segment-1" aria-current="page" href="/election/dashboard">Tableau de bord des élections</a>
			</li>
		</ol>
	</div>
</nav>
{# Fin fil d'arianne #}

<h2 class="fr-mt-2w">
	Mon tableau de bord
</h2>

<p class="fr-text--sm fr-mb-1w">
	Retrouvez, sur cette page, les différente élections que vous ou votre unité avez créées.
	<br>
	Vous pourrez ainsi vous en servir de modèle en les clonant, les modifier ou les adapter selon vos besoins.
	<br>
	C'est aussi dans cet espace que vous pourrez inscrire les candidats ou autoriser les utilisateurs à candidater.
</p>

<main>

	<h3>Élections créées au sein de mon unité:</h3>

	<a href="/election/create/0" target="_self" class="fr-link fr-icon-add-line fr-link--icon-left fr-mt-2w">Créer une nouvelle élection</a>

	<div class="fr-grid-row fr-grid-row--gutters fr-mt-4w">

		{% for election in elections %}

			<div class="fr-col-sm-6 fr-col-md-4 fr-col-lg-4 custom-card-container">

				<div class="fr-tile fr-enlarge-link" id="tile-4">
					<div class="fr-tile__body">
						<div class="fr-tile__content">
							<h3 class="fr-tile__title">
								<button type="button" class="custom-tile-menu--opener fr-icon-more-fill" id="election-{{ election.id }}-btn">
									{{ election.title }}
								</button>
							</h3>
							<p class="fr-tile__desc">{{ election.explaination }}</p>
							<p class="fr-tile__detail">
								Créée par&nbsp;
								{{ election.user.title }}

								<ul class="fr-tags-group">
									{% for grp in election.groupesConcernes %}
										<li>
											<p class="fr-tag fr-tag--défaut" id="tag-group-0">{{ grp.shortName }}</p>
										</li>
									{% endfor %}
								</ul>

							</p>

							<div class="fr-tile__start">
								{% set badge_class = election.isNotOpenYet()? 'fr-badge--purple-glycine' : election.isOpen() ? 'fr-badge--success': '' %}
								{% set badge_title = election.isNotOpenYet()? 'Ouverture prochaine' : election.isOpen() ? 'L\'élection est ouverte': 'Élection fermée' %}

									<p class="fr-badge {{ badge_class }}" title="{{ badge_title }}">Votes ouverts du
										{{ election.startDate | date('d/m/Y') }}
										au
										{{ election.endDate | date('d/m/Y') }}
									</p>
							</div>
						</div> <!-- fin .fr-tile__content -->
					</div> <!-- fin .fr-tile__body -->

						<div class="fr-tile__header">
							<div class="fr-tile__pictogram">
								<svg aria-hidden="true" class="fr-artwork" viewbox="0 0 80 80" width="80px" height="80px">
									<use class="fr-artwork-decorative" href="{{ asset('artwork/pictograms/buildings/city-hall.svg') }}#artwork-decorative"></use>
									<use class="fr-artwork-minor" href="{{ asset('artwork/pictograms/buildings/city-hall.svg') }}#artwork-minor"></use>
									<use class="fr-artwork-major" href="{{ asset('artwork/pictograms/buildings/city-hall.svg') }}#artwork-major"></use>
								</svg>
							</div>
						</div>

						<div class="custom-tile-menu">
							<menu class="fr-btns-group">
								<li><button type="button" class="custom-tile-menu--closer fr-btn fr-icon-close-line fr-btn--icon-right fr-btn--tertiary-no-outline">Fermer</button></li>
								<li><a target="_self" href="/election/clone/{{election.id}}" class="fr-btn fr-btn--tertiary">Cloner cette élection</a></li>
								<li><a target="_self" href="/election/edit/{{election.id}}" class="fr-btn fr-btn--tertiary">Modifier cette élection</a></li>
								<li><a target="_self" href="#" class="fr-btn fr-btn--tertiary">Gérer les candidats</a></li>
								<li><button disabled target="_self" href="#" class="fr-btn fr-btn--tertiary">Partager cette élection</button></li>
								<li><a target="_self" href="/election/cancel/{{election.id}}" class="custom-link--icon fr-link">Annuler cette élection</a></li>
							</menu>
						</div>

					</div> <!-- fin .fr-tile -->
					
				</div> <!-- fin .fr-col -->

			{% else %}
					
			<div class="fr-notice fr-notice--info">
				<div class="fr-container">
					<div class="fr-notice__body">
					<p>
						<span class="fr-notice__title">Vous n'avez pas encore créé d'élection.</span>
						<a href="/election/create/0" target="_self" class="fr-notice__link">C'est le moment de s'y mettre!</a>
					</p>
				</div>
			</div>

		{% endfor %}

	</div>

</main>

{% endblock %}
